<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../../jacoco-resources/report.gif" type="image/gif"/><title>VendingMachineTest.java</title><link rel="stylesheet" href="../../../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../../../index.html" class="el_report">edu.towson.cis.cosc442.project3.vendingmachine (Mar 11, 2023 9:49:17 AM)</a> &gt; <a href="../../index.html" class="el_group">VendingMachine2</a> &gt; <a href="../index.html" class="el_bundle">src</a> &gt; <a href="index.source.html" class="el_package">edu.towson.cis.cosc442.project3.vendingmachine</a> &gt; <span class="el_source">VendingMachineTest.java</span></div><h1>VendingMachineTest.java</h1><pre class="source lang-java linenums">package edu.towson.cis.cosc442.project3.vendingmachine;

import static org.junit.Assert.*;

import org.junit.After;
import org.junit.Before;
import org.junit.Test;

<span class="fc" id="L9">public class VendingMachineTest {</span>
    private VendingMachine vendingMachine;
    private VendingMachine fullVendingMachine;
    private VendingMachineItem item1;
    private VendingMachineItem item2;
    private VendingMachineItem item3;
    private VendingMachineItem item4;
    
    @Before
    public void setUp() {
<span class="fc" id="L19">        vendingMachine = new VendingMachine();</span>
<span class="fc" id="L20">        fullVendingMachine = new VendingMachine();</span>
<span class="fc" id="L21">        item1 = new VendingMachineItem(&quot;Chips&quot;, 1.50);</span>
<span class="fc" id="L22">        item2 = new VendingMachineItem(&quot;Soda&quot;, 2.00);</span>
<span class="fc" id="L23">        item3 = new VendingMachineItem(&quot;Item 3&quot;, 2.50);</span>
<span class="fc" id="L24">        item4 = new VendingMachineItem(&quot;Item 4&quot;, 3.00);</span>

        try {
<span class="fc" id="L27">        	fullVendingMachine.addItem(item1, &quot;A&quot;);</span>
<span class="fc" id="L28">        	fullVendingMachine.addItem(item2, &quot;B&quot;);</span>
<span class="fc" id="L29">        	fullVendingMachine.addItem(item3, &quot;C&quot;);</span>
<span class="fc" id="L30">        	fullVendingMachine.addItem(item4, &quot;D&quot;);</span>
<span class="pc" id="L31">        } catch (Exception e) {</span>
<span class="nc" id="L32">        	e.printStackTrace();</span>
        }
<span class="fc" id="L34">    }</span>

	@After
	public void tearDown() throws Exception {
<span class="fc" id="L38">	}</span>

    @Test
    public void testConstructorCreatesEmptyItemArray() {
<span class="fc" id="L42">        VendingMachine vm = new VendingMachine();</span>
<span class="fc" id="L43">        assertNull(vm.getItem(&quot;A&quot;));</span>
<span class="fc" id="L44">        assertNull(vm.getItem(&quot;B&quot;));</span>
<span class="fc" id="L45">        assertNull(vm.getItem(&quot;C&quot;));</span>
<span class="fc" id="L46">        assertNull(vm.getItem(&quot;D&quot;));</span>
<span class="fc" id="L47">    }</span>
    
    @Test
    public void testConstructorInitializesBalanceToZero() {
<span class="fc" id="L51">        VendingMachine vm = new VendingMachine();</span>
<span class="fc" id="L52">        assertEquals(0, vm.balance, 0.001);</span>
<span class="fc" id="L53">    }</span>
    
    @Test
    public void testAddItemValid() {
        try {
<span class="fc" id="L58">            vendingMachine.addItem(item1, &quot;A&quot;);</span>
<span class="fc" id="L59">            assertEquals(item1, vendingMachine.getItem(&quot;A&quot;));</span>
<span class="pc" id="L60">        } catch (VendingMachineException e) {</span>
<span class="nc" id="L61">            fail(&quot;Unexpected exception: &quot; + e.getMessage());</span>
        }
<span class="fc" id="L63">    }</span>
    
    @Test
    public void testAddItemAlreadyOccupied() {
        try {
<span class="fc" id="L68">            vendingMachine.addItem(item1, &quot;A&quot;);</span>
<span class="nc" id="L69">            vendingMachine.addItem(item2, &quot;A&quot;);</span>
<span class="nc" id="L70">            fail(&quot;Expected exception was not thrown&quot;);</span>
<span class="pc" id="L71">        } catch (VendingMachineException e) {</span>
<span class="fc" id="L72">            assertEquals(&quot;Slot &quot; + &quot;A&quot; + &quot; already occupied&quot;, e.getMessage());</span>
        }
<span class="fc" id="L74">    }</span>
    
    @Test
    public void testAddItemInvalidCode() {
        try {
<span class="nc" id="L79">            vendingMachine.addItem(item1, &quot;E&quot;);</span>
<span class="nc" id="L80">            fail(&quot;Expected exception was not thrown&quot;);</span>
<span class="pc" id="L81">        } catch (VendingMachineException e) {</span>
<span class="fc" id="L82">            assertEquals(&quot;Invalid code for vending machine item&quot;, e.getMessage());</span>
        }
<span class="fc" id="L84">    }</span>
    
    @Test
    public void testGetItem() {
<span class="fc" id="L88">    	vendingMachine.addItem(item1, VendingMachine.A_CODE);</span>
<span class="fc" id="L89">    	VendingMachineItem retrievedItem = vendingMachine.getItem(VendingMachine.A_CODE);</span>
<span class="fc" id="L90">    	assertEquals(item1, retrievedItem);</span>
<span class="fc" id="L91">    }</span>
    
    @Test
    public void testGetItemEmptySlot() {
<span class="fc" id="L95">    	VendingMachineItem retrievedItem = vendingMachine.getItem(VendingMachine.A_CODE);</span>
<span class="fc" id="L96">    	assertNull(retrievedItem);</span>
<span class="fc" id="L97">    }</span>
    
    @Test
    public void testThrowsForInvalidSlot() {
    	try {
<span class="nc" id="L102">    	    vendingMachine.getItem(&quot;E&quot;);</span>
<span class="nc" id="L103">    	    fail(&quot;Expected VendingMachineException was not thrown&quot;);</span>
<span class="pc" id="L104">    	} catch (VendingMachineException e) {</span>
<span class="fc" id="L105">    	    assertEquals(&quot;Invalid code for vending machine item&quot;, e.getMessage());</span>
    	}
<span class="fc" id="L107">    }</span>
    
    @Test
    public void testRemoveItemSuccess() throws VendingMachineException {
<span class="fc" id="L111">        vendingMachine.addItem(item1, &quot;A&quot;);</span>
<span class="fc" id="L112">        vendingMachine.addItem(item2, &quot;B&quot;);</span>
<span class="fc" id="L113">        vendingMachine.addItem(item3, &quot;C&quot;);</span>
<span class="fc" id="L114">        vendingMachine.addItem(item4, &quot;D&quot;);</span>
        
<span class="fc" id="L116">        VendingMachineItem removedItem = vendingMachine.removeItem(&quot;A&quot;);</span>
<span class="fc" id="L117">        assertEquals(item1, removedItem);</span>
        
<span class="fc" id="L119">        removedItem = vendingMachine.removeItem(&quot;B&quot;);</span>
<span class="fc" id="L120">        assertEquals(item2, removedItem);</span>
        
<span class="fc" id="L122">        removedItem = vendingMachine.removeItem(&quot;C&quot;);</span>
<span class="fc" id="L123">        assertEquals(item3, removedItem);</span>
        
<span class="fc" id="L125">        removedItem = vendingMachine.removeItem(&quot;D&quot;);</span>
<span class="fc" id="L126">        assertEquals(item4, removedItem);</span>
<span class="fc" id="L127">    }</span>
    
    @Test
    public void testRemoveItemEmptySlot() {
        try {
<span class="nc" id="L132">            vendingMachine.removeItem(&quot;A&quot;);</span>
<span class="nc" id="L133">            fail(&quot;Expected VendingMachineException was not thrown.&quot;);</span>
<span class="pc" id="L134">        } catch (VendingMachineException e) {</span>
<span class="fc" id="L135">            assertEquals(&quot;Slot A is empty -- cannot remove item&quot;, e.getMessage());</span>
        }
<span class="fc" id="L137">    }</span>

    @Test
    public void testRemoveItemInvalidCode() {
        try {
<span class="nc" id="L142">            vendingMachine.removeItem(&quot;E&quot;);</span>
<span class="nc" id="L143">            fail(&quot;Expected VendingMachineException was not thrown.&quot;);</span>
<span class="pc" id="L144">        } catch (VendingMachineException e) {</span>
<span class="fc" id="L145">            assertEquals(&quot;Invalid code for vending machine item&quot;, e.getMessage());</span>
        }
<span class="fc" id="L147">    }</span>
    
    @Test
	public void testInsertMoneyValidAmount() {
<span class="fc" id="L151">		VendingMachine vm = new VendingMachine();</span>
		try {
<span class="fc" id="L153">			vm.insertMoney(1.50);</span>
<span class="pc" id="L154">		} catch (VendingMachineException e) {</span>
<span class="nc" id="L155">			fail(&quot;Unexpected exception: &quot; + e.getMessage());</span>
		}
<span class="fc" id="L157">		assertEquals(1.50, vm.balance, 0.001);</span>
<span class="fc" id="L158">	}</span>

	@Test
	public void testInsertMoneyInvalidAmount() {
<span class="fc" id="L162">		VendingMachine vm = new VendingMachine();</span>
		try {
<span class="nc" id="L164">			vm.insertMoney(-1.0);</span>
<span class="nc" id="L165">			fail(&quot;Expected exception not thrown&quot;);</span>
<span class="pc" id="L166">		} catch (VendingMachineException e) {</span>
<span class="fc" id="L167">			assertEquals(&quot;Invalid amount.  Amount must be &gt;= 0&quot;, e.getMessage());</span>
<span class="fc" id="L168">			assertEquals(0.0, vm.balance, 0.001);</span>
		}
<span class="fc" id="L170">	}</span>
	
    @Test
    public void testGetBalanceEmptyVendingMachine() {
<span class="fc" id="L174">        VendingMachine vm = new VendingMachine();</span>
<span class="fc" id="L175">        assertEquals(0.0, vm.getBalance(), 0.001);</span>
<span class="fc" id="L176">    }</span>
    
    @Test
    public void testGetBalanceNonEmptyVendingMachine() throws VendingMachineException {
<span class="fc" id="L180">        VendingMachine vm = new VendingMachine();</span>
<span class="fc" id="L181">        VendingMachineItem item = new VendingMachineItem(&quot;Test Item&quot;, 1.25);</span>
<span class="fc" id="L182">        vm.addItem(item, &quot;A&quot;);</span>
<span class="fc" id="L183">        vm.insertMoney(1.0);</span>
<span class="fc" id="L184">        assertEquals(1.0, vm.getBalance(), 0.001);</span>
<span class="fc" id="L185">    }</span>
    
    @Test
    public void testMakePurchaseWithValidCodeAndEnoughMoney() {
<span class="fc" id="L189">    	fullVendingMachine.insertMoney(3.00);</span>
<span class="fc" id="L190">        boolean result = fullVendingMachine.makePurchase(&quot;A&quot;);</span>
<span class="fc" id="L191">        assertTrue(result);</span>
<span class="fc" id="L192">        assertEquals(1.50, fullVendingMachine.getBalance(), 0.01);</span>
<span class="fc" id="L193">        assertNull(fullVendingMachine.getItem(&quot;A&quot;));</span>
<span class="fc" id="L194">    }</span>

    @Test
    public void testMakePurchaseWithValidCodeAndNotEnoughMoney() {
<span class="fc" id="L198">    	fullVendingMachine.insertMoney(1.00);</span>
<span class="fc" id="L199">        boolean result = fullVendingMachine.makePurchase(&quot;B&quot;);</span>
<span class="fc" id="L200">        assertFalse(result);</span>
<span class="fc" id="L201">        assertEquals(1.00, fullVendingMachine.getBalance(), 0.01);</span>
<span class="fc" id="L202">        assertNotNull(fullVendingMachine.getItem(&quot;B&quot;));</span>
<span class="fc" id="L203">    }</span>

    @Test(expected = VendingMachineException.class)
    public void testMakePurchaseWithInvalidCode() {
<span class="nc" id="L207">        vendingMachine.makePurchase(&quot;E&quot;);</span>
<span class="nc" id="L208">    }</span>

    @Test
    public void testMakePurchaseWithEmptySlot() {
<span class="fc" id="L212">    	fullVendingMachine.insertMoney(3.00);</span>
<span class="fc" id="L213">        fullVendingMachine.removeItem(&quot;A&quot;);</span>
<span class="fc" id="L214">        boolean result = fullVendingMachine.makePurchase(&quot;A&quot;);</span>
<span class="fc" id="L215">        assertFalse(result);</span>
<span class="fc" id="L216">        assertEquals(3.00, fullVendingMachine.getBalance(), 0.01);</span>
<span class="fc" id="L217">        assertNull(fullVendingMachine.getItem(&quot;A&quot;));</span>
<span class="fc" id="L218">    }</span>

    @Test
    public void testMakePurchaseWithZeroBalance() {
<span class="fc" id="L222">    	fullVendingMachine.returnChange();</span>
<span class="fc" id="L223">        boolean result = fullVendingMachine.makePurchase(&quot;A&quot;);</span>
<span class="fc" id="L224">        assertFalse(result);</span>
<span class="fc" id="L225">        assertEquals(0.00, fullVendingMachine.getBalance(), 0.01);</span>
<span class="fc" id="L226">        assertNotNull(fullVendingMachine.getItem(&quot;A&quot;));</span>
<span class="fc" id="L227">    }</span>
    
    @Test
    public void testMakePurchaseReturnsTrue() {
        try {
<span class="fc" id="L232">        	fullVendingMachine.insertMoney(2.50);</span>
<span class="pc" id="L233">        } catch (VendingMachineException e) {</span>
<span class="nc" id="L234">            e.printStackTrace();</span>
        }
<span class="fc" id="L236">        assertTrue(fullVendingMachine.makePurchase(&quot;B&quot;));</span>
<span class="fc" id="L237">        assertEquals(0.50, fullVendingMachine.getBalance(), 0.001);</span>
<span class="fc" id="L238">    }</span>

    @Test
    public void testMakePurchaseReturnsFalseNotEnoughMoney() {
        try {
<span class="fc" id="L243">        	fullVendingMachine.insertMoney(1.00);</span>
<span class="pc" id="L244">        } catch (VendingMachineException e) {</span>
<span class="nc" id="L245">            e.printStackTrace();</span>
        }
<span class="fc" id="L247">        assertFalse(fullVendingMachine.makePurchase(&quot;A&quot;));</span>
<span class="fc" id="L248">        assertEquals(1.00, fullVendingMachine.getBalance(), 0.001);</span>
<span class="fc" id="L249">    }</span>

    @Test
    public void testReturnChange() throws VendingMachineException {
        // Insert some money into the vending machine
<span class="fc" id="L254">        vendingMachine.insertMoney(2.50);</span>
        
        // Return the change and verify that the correct amount is returned
<span class="fc" id="L257">        double change = vendingMachine.returnChange();</span>
<span class="fc" id="L258">        assertEquals(2.50, change, 0.001);</span>
        
        // Verify that the balance is now 0
<span class="fc" id="L261">        assertEquals(0.0, vendingMachine.getBalance(), 0.001);</span>
<span class="fc" id="L262">    }</span>
    
    @Test
    public void testReturnChangeNoMoneyInserted() {
        // Try to return change without inserting any money
<span class="fc" id="L267">        double change = vendingMachine.returnChange();</span>
<span class="fc" id="L268">        assertEquals(0.0, change, 0.001);</span>
        
        // Verify that the balance is still 0
<span class="fc" id="L271">        assertEquals(0.0, vendingMachine.getBalance(), 0.001);</span>
<span class="fc" id="L272">    }</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span>edu.towson.cis.cosc442.project3.vendingmachine (Mar 11, 2023 9:49:17 AM)</div></body></html>